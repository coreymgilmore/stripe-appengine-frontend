<!DOCTYPE html>
<html>
	<head>
		{{template "html_head"}}
	</head>
	<body>
		{{template "header" . }}

		<div class="container">
			<!-- APP TITLE & NAV BAR -->
			<div class="row">
				<div class="col-xs-12 col-sm-10 col-sm-offset-1">
					<center>
						<div class="btn-group" id="nav-buttons" data-toggle="buttons">
							{{/*ONLY USERS WITH CORRECT ACCESS RIGHTS CAN VIEW CERTAIN ACTION PANELS*/}}
							{{/*hide the buttons to panels the user does not have access to*/}}
							{{if .AddCards}}
							<label class="btn btn-default action-btn" data-action="panel-add-card">
								<input type="radio">Add
							</label>
							{{end}}
							{{if .RemoveCards}}
							<label class="btn btn-default action-btn" data-action="panel-remove-card">
								<input type="radio">Remove
							</label>
							{{end}}
							{{if .ChargeCards}}
							<label class="btn btn-default action-btn active" data-action="panel-charge-card">
								<input type="radio" checked>Charge
							</label>
							{{end}}
							{{if .ViewReports}}
							<label class="btn btn-default action-btn" data-action="panel-reports">
								<input type="radio">Reports
							</label>
							{{end}}
							{{if .Administrator}}
							<label class="btn btn-default action-btn" data-action="panel-settings">
								<input type="radio">Settings
							</label>
							{{end}}
						</div>
					</center>
				</div>
			</div>

			<!-- ADD, REMOVE, CHARGE PANELS -->
			<div class="row">
				<div class="col-xs-12 col-sm-6 col-sm-offset-3 col-lg-4 col-lg-offset-4" id="action-panels-container">
					{{/*HIDE ACTION PANELS FOR USERS THAT DO NOT HAVE ACCESS RIGHTS*/}}
					{{/*same as hiding buttons in nav, but hide the panels so the user cannot see the panels in the code*/}}

					{{if .AddCards}}
					<!-- ADD NEW CUSTOMER/CARD -->
					<div class="panel panel-default action-panels" id="panel-add-card">
						<div class="panel-heading">
							<h3 class="panel-title">Add a New Card</h3>
						</div>
						<div class="panel-body">
							<form id="add-card">
								<div class="form-group">
									<label class="control-label">Customer ID: </label>
									<input class="form-control" id="customer-id" name="customer-id" type="text" placeholder="A unique identifier (can be left blank).">
								</div>
								<div class="form-group">
									<label class="control-label">Customer Name: </label>
									<input class="form-control" id="customer-name" name="customer-name" type="text" placeholder="ABC Corp., John Smith" required>
								</div>
								<div class="form-group">
									<label class="control-label">Cardholder: </label>
									<input class="form-control" id="cardholder-name" name="cardholder-name" type="text" placeholder="The name on the card." required>
								</div>
								<div class="form-group">
									<label class="control-label">Card Number: </label>
									<input class="form-control disable-spinner" id="card-number" name="card-number" type="number" min="0" step="1" placeholder="The credit card number." required>
								</div>
								<div class="form-group">
									<label class="control-label">Expiration Month: </label>
									<select class="form-control" id="card-exp-month" name="card-exp-month">
										<option value="0">Please choose.</option>
										<option value="01">01 - January</option>
										<option value="02">02 - February</option>
										<option value="03">03 - March</option>
										<option value="04">04 - April</option>
										<option value="05">05 - May</option>
										<option value="06">06 - June</option>
										<option value="07">07 - July</option>
										<option value="08">08 - August</option>
										<option value="09">09 - September</option>
										<option value="10">10 - October</option>
										<option value="11">11 - November</option>
										<option value="12">12 - Decemeber</option>
									</select>
								</div>
								<div class="form-group">
									<label class="control-label">Expiration Year: </label>
									<select class="form-control" id="card-exp-year" name="card-exp-year">
										<option value="0">Loading...</option>
									</select>
								</div>
								<div class="form-group">
									<label class="control-label">Security Code: </label>
									<input class="form-control disable-spinner" id="card-cvc" name="card-cvc" type="number" min="0" max="9999" step="1" placeholder="3, or 4 digits on the card's back." required>
								</div>
								<div class="form-group">
									<label class="control-label">Billing Postal Code: </label>
									<input class="form-control disable-spinner" id="card-postal-code" name="card-postal-code" type="text" maxlength="6" required>
								</div>
								<div id="error-msg"></div>
								<div class="form-group">
									<button class="btn btn-primary" id="submit" name="submit" type="submit">Add Card</button>
								</div>
							</form>
						</div>
					</div>
					{{end}}

					{{if .RemoveCards}}
					<!-- REMOVE CUSTOMER/CARD -->
					<div class="panel panel-default action-panels" id="panel-remove-card">
						<div class="panel-heading">
							<h3 class="panel-title">Remove a Card</h3>
						</div>
						<div class="panel-body">
							<div class="info">
								<p>Please provide the "Customer Name" of the card you want to remove.</p>
							</div>

							<form id="remove-card">
								<div class="form-group">
									<label class="control-label">Customer Name: </label>
									<datalist id="customer-names">
										<option value="None">None</option>
									</datalist>
									<input class="form-control customer-name" type="list" list="customer-names" required>
								</div>
								
								<div class="form-group">
									<input class="btn btn-danger" id="submit" name="submit" type="submit" value="Remove Card" required>
								</div>
							</form>
						</div>
					</div>
					{{end}}

					{{if .RemoveCards}}
					<!-- CHARGE A CARD -->
					<div class="panel panel-default action-panels show" id="panel-charge-card">
						<div class="panel-heading">
							<h3 class="panel-title">Charge a Card</h3>
						</div>
						<div class="panel-body">
							<form id="charge-card">
								<div class="form-group">
									<label class="control-label">Customer Name: </label>
									<datalist id="customer-names">
										<option value="None">None</option>
									</datalist>
									<input class="form-control customer-name" name="customer-name" type="list" list="customer-names" required>
								</div>
								<div class="form-group">
									<label class="control-label">Cardholder: </label>
									<input class="form-control customer-cardholder" name="customer-cardholder" readonly tabindex="-1">
								</div>
								<div class="form-group">
									<label class="control-label">Last Four: </label>
									<input class="form-control customer-last-four" name="customer-last-four" readonly tabindex="-1">
								</div>
								<div class="form-group">
									<label class="control-label">Expiration: </label>
									<input class="form-control customer-expiration" name="customer-expiration" readonly tabindex="-1">
								</div>
								<hr class="hr-panel">
								
								<div class="form-group">
									<label class="control-label">Amount: </label>
									<input class="form-control charge-amount" name="charge-amount" type="number" min="0" max="30000" step="0.01" placeholder="$1.23" required disabled>
								</div>
								<div class="form-group">
									<label class="control-label">Invoice Number <small>(optional)</small>: </label>
									<input class="form-control charge-invoice" name="charge-invoice" type="text" disabled>
								</div>
								<div class="form-group">
									<label class="control-label">PO Number <small>(optional)</small>: </label>
									<input class="form-control charge-po" name="charge-po" type="text" disabled>
								</div>

								<div class="form-group">
									<input class="customer-datastore-id" type="hidden"> <!-- the appengine datastore id for this customer id and customer name -->
									<input class="customer-id" type="hidden">	<!-- the customer id that was provided when creating this customer -->
									<input class="customer-stripe-id" type="hidden"> <!-- the stripe id for this customer 'cus_' -->
									<input class="btn btn-primary" id="charge-card-submit" name="submit" type="submit" value="Charge Card" required>
								</div>
							</form>
						</div>
					</div>
					{{else}}
					{{/*need this panel as an "else" because this is the default panel*/}}
					<div class="panel panel-default action-panels show charge-card-no-access" id="panel-charge-card">
						<div class="panel-heading">
							<h3 class="panel-title">Task Selector</h3>
						</div>
						<div class="panel-body">
							<h4>Please choose a task you would like to perform by selection one of the buttons above.</h4>
						</div>
					</div>
					{{end}}

					{{if .ViewReports}}
					<!-- REPORTS -->
					<div class="panel panel-default action-panels" id="panel-reports" >
						<div class="panel-heading">
							<h3 class="panel-title">Get Reports</h3>
						</div>
						<div class="panel-body">
							<form id="report-by-customer">
								<div class="form-group">
									<label class="control-label">Customer Name: </label>
									<datalist id="customer-ids">
										<option value="None">None</option>
									</datalist>
									<input class="form-control customer-name" name="customer-name" type="list" list="customer-ids" required>
								</div>
								<div class="form-group">
									<label class="control-label">Start Date: </label>
									<input class="form-control start-date" name="start-date" type="date" required>
								</div>
								<div class="form-group">
									<label class="control-label">End Date: </label>
									<input class="form-control start-date" name="start-date" type="date" required>
								</div>
								<div class="form-group">
									<input id="customer-datastore-id" type="hidden"> <!-- the appengine datastore id for this customer id and customer name -->
									<input id="customer-id" type="hidden">	<!-- the customer id that was provided when creating this customer -->
									<input id="customer-stripe-id" type="hidden"> <!-- the stripe id for this customer 'cus_' -->
									<input class="btn btn-primary" id="reports-submit" name="submit" type="submit" value="Go" required>
								</div>
							</form>
						</div>
					</div>
					{{end}}

					{{if .Administrator}}
					<!-- SETTINGS -->
					<div class="panel panel-default action-panels" id="panel-settings" >
						<div class="panel-heading">
							<h3 class="panel-title">Settings</h3>
						</div>
						<div class="panel-body">
							<h5>Add a New User</h5>
							<button class="btn btn-primary pull-center" id="open-modal-new-user" data-toggle="modal" data-target="#modal-new-user">Go</button>
							<hr class="hr-panel">

							<h5>Change a User's Password</h5>
							<button class="btn btn-primary pull-center" id="open-modal-change-pwd" data-toggle="modal" data-target="#modal-change-pwd">Go</button>
							<hr class="hr-panel">

							<h5>Update User's Access Rights</h5>
							<button class="btn btn-primary pull-center" id="open-modal-update-user" data-toggle="modal" data-target="#modal-update-user">Go</button>
						</div>
					</div>
					{{end}}

					<!-- SUCCESSFUL ACTION PANEL -->
					<div class="panel panel-success action-panels" id="panel-success" >
						<div class="panel-heading">
							<h3 class="panel-title">Success!</h3>
						</div>
						<div class="panel-body">
							<h5><span class="glyphicon glyphicon-ok"></span> The credit card was charged successfully.</h5>
							<p>Please see details below and email a receipt if necessary.</p>
						</div>
					</div>

					<!-- CARD CHARGED ERROR -->
					<div class="panel panel-danger action-panels" id="panel-error" >
						<div class="panel-heading">
							<h3 class="panel-title">Error!</h3>
						</div>
						<div class="panel-body">
							<h5><span class="glyphicon glyphicon-remove"></span> The credit card could not be charged.</h5>
							<p>Please see details below.</p>
						</div>
					</div>

				</div>
			</div>
		</div>

		{{/*ONLY ADMINS CAN SEE MODALS SINCE THESE ARE FOR THE "SETTINGS" NAV BUTTON/PANEL*/}}
		{{if .Administrator}}

		<!-- MODALS -->
		<!-- NEW USER -->
		<div class="modal fade" id="modal-new-user">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title">Add a New User</h4>
					</div>
					<div class="modal-body">
						<form class="form-horizontal" id="form-new-user">
							<div class="form-group">
								<label class="control-label col-sm-3">Username:</label>
								<div class="col-sm-8">
									<input class="form-control username" type="email" placeholder="Email address." required autocomplete="off">
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-3">Password:</label>
								<div class="col-sm-8">
									<input class="form-control password1" type="password" placeholder="Min. 8 Characters." required autocomplete="off">
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-3">Password (again):</label>
								<div class="col-sm-8">
									<input class="form-control password2" type="password" required autocomplete="off">
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-3">Add Cards?:</label>
								<div class="col-sm-8">
									<div class="btn-group can-add-cards" data-toggle="buttons">
										<label class="btn btn-default">
											<input class="radio-yes" type="radio" name="can-add-cards" value="true">Yes
										</label>
										<label class="btn btn-default active">
											<input class="radio-no default" type="radio" name="can-add-cards" value="false" checked>No
										</label>
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-3">Remove Cards?:</label>
								<div class="col-sm-8">
									<div class="btn-group can-remove-cards" data-toggle="buttons">
										<label class="btn btn-default">
											<input class="radio-yes" type="radio" name="can-remove-cards" value="true">Yes
										</label>
										<label class="btn btn-default active">
											<input class="radio-no default" type="radio" name="can-remove-cards" value="false" checked>No
										</label>
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-3">Charge Cards?:</label>
								<div class="col-sm-8">
									<div class="btn-group can-charge-cards" data-toggle="buttons">
										<label class="btn btn-default">
											<input class="radio-yes" type="radio" name="can-charge-cards" value="true">Yes
										</label>
										<label class="btn btn-default active">
											<input class="radio-no default" type="radio" name="can-charge-cards" value="false" checked>No
										</label>
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-3">View Reports?:</label>
								<div class="col-sm-8">
									<div class="btn-group can-view-reports" data-toggle="buttons">
										<label class="btn btn-default">
											<input class="radio-yes" type="radio" name="can-view-reports" value="true">Yes
										</label>
										<label class="btn btn-default active">
											<input class="radio-no default" type="radio" name="can-view-reports" value="false" checked>No
										</label>
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-3">Administrator?:</label>
								<div class="col-sm-8">
									<div class="btn-group is-admin" data-toggle="buttons">
										<label class="btn btn-default">
											<input class="radio-yes" type="radio" name="is-admin" value="true">Yes
										</label>
										<label class="btn btn-default active">
											<input class="radio-no default" type="radio" name="is-admin" value="false" checked>No
										</label>
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-3">Allowed Access?:</label>
								<div class="col-sm-8">
									<div class="btn-group is-active" data-toggle="buttons">
										<label class="btn btn-default active">
											<input class="radio-yes default" type="radio" name="is-active" value="true" checked>Yes
										</label>
										<label class="btn btn-default">
											<input class="radio-no" type="radio" name="is-active" value="false">No
										</label>
									</div>
								</div>
							</div>
							<div class="msg"></div>
						</form>
					</div>
					<div class="modal-footer">
						<div class="btn-group">
							<button class="btn btn-default" type="button" data-dismiss="modal">Close</button>
							<button class="btn btn-primary" id="form-new-user-submit" type="submit" form="form-new-user">Add User</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- CHANGE A USER'S PASSWORD -->
		<div class="modal fade" id="modal-change-pwd">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title">Change Password</h4>
					</div>
					<div class="modal-body">
						<form class="form-horizontal" id="form-change-pwd" method="POST" action="">
							<div class="form-group">
								<label class="control-label col-sm-3">Username:</label>
								<div class="col-sm-8">
									<select class="form-control user-list">
										<option value="0">Please choose...</option>
									</select>
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-3">Password:</label>
								<div class="col-sm-8">
									<input class="form-control password1" type="password" placeholder="Min. 8 Characters." required>
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-3">Password (again):</label>
								<div class="col-sm-8">
									<input class="form-control password2" type="password" required>
								</div>
							</div>
							<div class="msg"></div>
						</form>
					</div>
					<div class="msg"></div>
					<div class="modal-footer">
						<div class="btn-group">
							<button class="btn btn-default" type="button" data-dismiss="modal">Close</button>
							<button class="btn btn-primary" id="change-password-submit" type="submit" form="form-change-pwd">Save</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- UPDATE A USER'S ACCESS RIGHTS -->
		<div class="modal fade" id="modal-update-user">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title">Update a User</h4>
					</div>
					<div class="modal-body">
						<form class="form-horizontal" id="form-update-user" method="POST" action="">
							<div class="form-group">
								<label class="control-label col-sm-3">Username:</label>
								<div class="col-sm-8">
									<select class="form-control user-list">
										<option value="0">Please choose...</option>
									</select>
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-3">Add Cards?:</label>
								<div class="col-sm-8">
									<div class="btn-group can-add-cards" data-toggle="buttons">
										<label class="btn btn-default" disabled>
											<input class="radio-yes" type="radio" name="can-add-cards" value="true" disabled>Yes
										</label>
										<label class="btn btn-default" disabled>
											<input class="radio-no" type="radio" name="can-add-cards" value="false" disabled>No
										</label>
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-3">Remove Cards?:</label>
								<div class="col-sm-8">
									<div class="btn-group can-remove-cards" data-toggle="buttons">
										<label class="btn btn-default" disabled>
											<input class="radio-yes" type="radio" name="can-remove-cards" value="true" disabled>Yes
										</label>
										<label class="btn btn-default" disabled>
											<input class="radio-no" type="radio" name="can-remove-cards" value="false" disabled>No
										</label>
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-3">Charge Cards?:</label>
								<div class="col-sm-8">
									<div class="btn-group can-charge-cards" data-toggle="buttons">
										<label class="btn btn-default" disabled>
											<input class="radio-yes" type="radio" name="can-charge-cards" value="true" disabled>Yes
										</label>
										<label class="btn btn-default" disabled>
											<input class="radio-no" type="radio" name="can-charge-cards" value="false" disabled>No
										</label>
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-3">View Reports?:</label>
								<div class="col-sm-8">
									<div class="btn-group can-view-reports" data-toggle="buttons">
										<label class="btn btn-default" disabled>
											<input class="radio-yes" type="radio" name="can-view-reports" value="true" disabled>Yes
										</label>
										<label class="btn btn-default" disabled>
											<input class="radio-no" type="radio" name="can-view-reports" value="false" disabled>No
										</label>
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-3">Administrator?:</label>
								<div class="col-sm-8">
									<div class="btn-group is-admin" data-toggle="buttons">
										<label class="btn btn-default" disabled>
											<input class="radio-yes" type="radio" name="is-admin" value="true" disabled>Yes
										</label>
										<label class="btn btn-default" disabled>
											<input class="radio-no" type="radio" name="is-admin" value="false" disabled>No
										</label>
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-3">Allowed Access?:</label>
								<div class="col-sm-8">
									<div class="btn-group is-active" data-toggle="buttons">
										<label class="btn btn-default" disabled>
											<input class="radio-yes" type="radio" name="is-active" value="true" disabled>Yes
										</label>
										<label class="btn btn-default" disabled>
											<input class="radio-no" type="radio" name="is-active" value="false" disabled>No
										</label>
									</div>
								</div>
							</div>
							<div class="msg"></div>
						</form>
					</div>
					<div class="modal-footer">
						<div class="btn-group">
							<button class="btn btn-default" type="button" data-dismiss="modal">Close</button>
							<button class="btn btn-primary" id="update-user-submit" type="submit" form="form-update-user" disabled>Save</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		{{end}}

		{{template "footer"}}
		{{template "stripe-js"}}
		{{template "html_scripts"}}
	<body>
</body>